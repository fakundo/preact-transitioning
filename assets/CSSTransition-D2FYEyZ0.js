import{x as V,_ as f,k as O,t as X,K as h}from"./preact.module-CLNnjL5T.js";import{A as y,d as S,y as w,_ as F,T as I}from"./hooks.module-Bqmbac_-.js";class g extends V{componentDidMount(){const{nodeRef:t}=this.props;t.current=this.base}componentWillUnmount(){const{nodeRef:t}=this.props;t.current=void 0}render(){const{children:t}=this.props;return f(O,{},t)}}var n=(e=>(e.APPEAR="appear",e.APPEAR_ACTIVE="appearActive",e.APPEAR_DONE="appearDone",e.ENTER="enter",e.ENTER_ACTIVE="enterActive",e.ENTER_DONE="enterDone",e.EXIT="exit",e.EXIT_ACTIVE="exitActive",e.EXIT_DONE="exitDone",e))(n||{});const _={appear:["onEnter","appearActive"],appearActive:["onEntering","appearDone",!0],appearDone:["onEntered"],enter:["onEnter","enterActive"],enterActive:["onEntering","enterDone",!0],enterDone:["onEntered"],exit:["onExit","exitActive"],exitActive:["onExiting","exitDone",!0],exitDone:["onExited"]},U=500;function j(e){const{children:t,in:r=!1,appear:d=!1,enter:D=!0,exit:a=!0,duration:c=U,alwaysMounted:E=!1,addEndListener:u}=e,x=y(null),[i,s]=S(()=>{switch(!0){case!r:return"exitDone";case!!d:return"appear";default:return"appearDone"}});w(()=>{const{setTimeout:o,clearTimeout:A}=window,[v,p,C]=_[i],{[v]:P}=e;P?.(x.current);let N=0,R=0;return p&&(C?u?u(x.current,()=>s(p)):N=o(s,c,p):R=requestAnimationFrame(()=>s(p))),()=>{A(N),cancelAnimationFrame(R)}},[i,c]),F(()=>{const o=["exit","exitActive","exitDone"].includes(i);r&&o&&s(D?"enter":"enterDone"),!r&&!o&&s(a?"exit":"exitDone")},[r]);const m=I(()=>Object.keys(_).reduce((o,A)=>({...o,[A]:i===A}),{}),[i]);return!E&&(a?i==="exitDone":!r)?null:f(g,{nodeRef:x,children:typeof t=="function"?t(m,i):t})}const k={[n.APPEAR]:"-appear",[n.APPEAR_ACTIVE]:"-appear-active",[n.APPEAR_DONE]:"-appear-done",[n.ENTER]:"-enter",[n.ENTER_ACTIVE]:"-enter-active",[n.ENTER_DONE]:"-enter-done",[n.EXIT]:"-exit",[n.EXIT_ACTIVE]:"-exit-active",[n.EXIT_DONE]:"-exit-done"},M=(e,t)=>`${e}${t}`,T=(...e)=>e.filter(t=>!!t).join(" "),l=(e,t)=>typeof t=="string"?M(t,k[e]):t[e],$=(e,t)=>{const r=l(e,t);switch(e){case n.APPEAR_ACTIVE:return T(l(n.APPEAR,t),r);case n.ENTER_ACTIVE:return T(l(n.ENTER,t),r);case n.EXIT_ACTIVE:return T(l(n.EXIT,t),r);default:return r}};function q(e){const{children:t,classNames:r,...d}=e;return X(t)?f(j,{...d,children:(D,a)=>{const{className:c,class:E}=t.props,u=I(()=>T(E||c,$(a,r)),[c,E,r,a]);return h(t,{class:u})}}):null}export{q as C,U as D,n as P,j as T};
